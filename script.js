const magazineImages = {
    'post-01': ['postimg/post-01/Artboard-1.png', 'postimg/post-01/Artboard-2.png', 'postimg/post-01/Artboard-3.png', 'postimg/post-01/Artboard-4.png', 'postimg/post-01/Artboard-5.png', 'postimg/post-01/Artboard-6.png', 'postimg/post-01/Artboard-7.png', 'postimg/post-01/Artboard-8.png'],
    'post-02': ['postimg/post-02/Artboard-1.png', 'postimg/post-02/Artboard-2.png', 'postimg/post-02/Artboard-3.png', 'postimg/post-02/Artboard-4.png', 'postimg/post-02/Artboard-5.png', 'postimg/post-02/Artboard-6.png', 'postimg/post-02/Artboard-7.png', 'postimg/post-02/Artboard-8.png'],
    'post-03': ['postimg/post-03/Artboard-1.png', 'postimg/post-03/Artboard-2.png', 'postimg/post-03/Artboard-3.png', 'postimg/post-03/Artboard-4.png', 'postimg/post-03/Artboard-5.png', 'postimg/post-03/Artboard-6.png', 'postimg/post-03/Artboard-7.png', 'postimg/post-03/Artboard-8.png'],
    'post-04': ['postimg/post-04/Artboard-1.png', 'postimg/post-04/Artboard-2.png', 'postimg/post-04/Artboard-3.png', 'postimg/post-04/Artboard-4.png', 'postimg/post-04/Artboard-5.png', 'postimg/post-04/Artboard-6.png'],
    'post-05': ['postimg/post-05/Artboard-1.png', 'postimg/post-05/Artboard-2.png', 'postimg/post-05/Artboard-3.png', 'postimg/post-05/Artboard-4.png', 'postimg/post-05/Artboard-5.png', 'postimg/post-05/Artboard-6.png', 'postimg/post-05/Artboard-7.png'],
    'post-06': ['postimg/post-06/Artboard-1.png', 'postimg/post-06/Artboard-2.png', 'postimg/post-06/Artboard-3.png', 'postimg/post-06/Artboard-4.png', 'postimg/post-06/Artboard-5.png', 'postimg/post-06/Artboard-6.png', 'postimg/post-06/Artboard-7.png', 'postimg/post-06/Artboard-8.png', 'postimg/post-06/Artboard-9.png'],
    'post-07': ['postimg/post-07/Artboard-1.png', 'postimg/post-07/Artboard-2.png', 'postimg/post-07/Artboard-3.png', 'postimg/post-07/Artboard-4.png', 'postimg/post-07/Artboard-5.png', 'postimg/post-07/Artboard-6.png', 'postimg/post-07/Artboard-7.png', 'postimg/post-07/Artboard-8.png', 'postimg/post-07/Artboard-9.png', 'postimg/post-07/Artboard-10.png'],
    'post-08': ['postimg/post-08/Artboard-1.png', 'postimg/post-08/Artboard-2.png', 'postimg/post-08/Artboard-3.png', 'postimg/post-08/Artboard-4.png', 'postimg/post-08/Artboard-5.png', 'postimg/post-08/Artboard-6.png', 'postimg/post-08/Artboard-7.png'],
    'post-09': ['postimg/post-09/Artboard-1.png', 'postimg/post-09/Artboard-2.png', 'postimg/post-09/Artboard-3.png', 'postimg/post-09/Artboard-4.png', 'postimg/post-09/Artboard-5.png', 'postimg/post-09/Artboard-6.png', 'postimg/post-09/Artboard-7.png'],
    'post-10': ['postimg/post-10/Artboard-1.png', 'postimg/post-10/Artboard-2.png', 'postimg/post-10/Artboard-3.png', 'postimg/post-10/Artboard-4.png', 'postimg/post-10/Artboard-5.png', 'postimg/post-10/Artboard-6.png', 'postimg/post-10/Artboard-7.png', 'postimg/post-10/Artboard-8.png', 'postimg/post-10/Artboard-9.png'],
    'post-11': ['postimg/post-11/Artboard-1.png', 'postimg/post-11/Artboard-2.png', 'postimg/post-11/Artboard-3.png', 'postimg/post-11/Artboard-4.png', 'postimg/post-11/Artboard-5.png', 'postimg/post-11/Artboard-6.png', 'postimg/post-11/Artboard-7.png', 'postimg/post-11/Artboard-8.png', 'postimg/post-11/Artboard-9.png', 'postimg/post-11/Artboard-10.png'],
    'post-12': ['postimg/post-12/Artboard-1.png', 'postimg/post-12/Artboard-2.png', 'postimg/post-12/Artboard-3.png', 'postimg/post-12/Artboard-4.png', 'postimg/post-12/Artboard-5.png', 'postimg/post-12/Artboard-6.png', 'postimg/post-12/Artboard-7.png', 'postimg/post-12/Artboard-8.png', 'postimg/post-12/Artboard-9.png', 'postimg/post-12/Artboard-10.png'],
    'post-13': ['postimg/post-13/Artboard-1.png', 'postimg/post-13/Artboard-2.png', 'postimg/post-13/Artboard-3.png', 'postimg/post-13/Artboard-4.png', 'postimg/post-13/Artboard-5.png', 'postimg/post-13/Artboard-6.png', 'postimg/post-13/Artboard-7.png', 'postimg/post-13/Artboard-8.png', 'postimg/post-13/Artboard-9.png', 'postimg/post-13/Artboard-10.png'],
    'post-14': ['postimg/post-14/Artboard-1.png', 'postimg/post-14/Artboard-2.png', 'postimg/post-14/Artboard-3.png', 'postimg/post-14/Artboard-4.png', 'postimg/post-14/Artboard-5.png', 'postimg/post-14/Artboard-6.png', 'postimg/post-14/Artboard-7.png', 'postimg/post-14/Artboard-8.png'],
    'post-15': ['postimg/post-15/Artboard-1.png', 'postimg/post-15/Artboard-2.png', 'postimg/post-15/Artboard-3.png', 'postimg/post-15/Artboard-4.png', 'postimg/post-15/Artboard-5.png', 'postimg/post-15/Artboard-6.png', 'postimg/post-15/Artboard-7.png', 'postimg/post-15/Artboard-8.png', 'postimg/post-15/Artboard-9.png', 'postimg/post-15/Artboard-10.png', 'postimg/post-15/Artboard-11.png', 'postimg/post-15/Artboard-12.png'],
    'post-16': ['postimg/post-16/Artboard-1.png', 'postimg/post-16/Artboard-2.png', 'postimg/post-16/Artboard-3.png', 'postimg/post-16/Artboard-4.png', 'postimg/post-16/Artboard-5.png', 'postimg/post-16/Artboard-6.png', 'postimg/post-16/Artboard-7.png', 'postimg/post-16/Artboard-8.png', 'postimg/post-16/Artboard-9.png', 'postimg/post-16/Artboard-10.png', 'postimg/post-16/Artboard-11.png'],
    'post-17': ['postimg/post-17/Artboard-1.png', 'postimg/post-17/Artboard-2.png', 'postimg/post-17/Artboard-3.png', 'postimg/post-17/Artboard-4.png', 'postimg/post-17/Artboard-5.png', 'postimg/post-17/Artboard-6.png', 'postimg/post-17/Artboard-7.png', 'postimg/post-17/Artboard-8.png', 'postimg/post-17/Artboard-9.png', 'postimg/post-17/Artboard-10.png', 'postimg/post-17/Artboard-11.png', 'postimg/post-17/Artboard-12.png']
};

let currentMagazine = '';
let currentImageIndex = 0;
let currentImages = [];

// Touch/swipe variables
let touchStartX = 0;
let touchEndX = 0;
let isDragging = false;

function openModal(magazineId) {
    currentMagazine = magazineId;
    currentImages = magazineImages[magazineId] || [];
    currentImageIndex = 0;
    
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const currentImageSpan = document.getElementById('currentImage');
    const totalImagesSpan = document.getElementById('totalImages');
    
    if (currentImages.length > 0) {
        modalImage.src = currentImages[0];
        currentImageSpan.textContent = 1;
        totalImagesSpan.textContent = currentImages.length;
        modal.classList.add('active');
    }
}

function closeModal() {
    const modal = document.getElementById('imageModal');
    modal.classList.remove('active');
}

function changeImage(direction) {
    if (currentImages.length === 0) return;
    
    currentImageIndex += direction;
    
    if (currentImageIndex < 0) {
        currentImageIndex = currentImages.length - 1;
    } else if (currentImageIndex >= currentImages.length) {
        currentImageIndex = 0;
    }
    
    const modalImage = document.getElementById('modalImage');
    const currentImageSpan = document.getElementById('currentImage');
    
    modalImage.src = currentImages[currentImageIndex];
    currentImageSpan.textContent = currentImageIndex + 1;
}

// Touch event handlers for swipe functionality
function handleTouchStart(e) {
    touchStartX = e.changedTouches[0].screenX;
    isDragging = true;
}

function handleTouchMove(e) {
    if (!isDragging) return;
    e.preventDefault(); // Prevent scrolling
}

function handleTouchEnd(e) {
    if (!isDragging) return;
    
    touchEndX = e.changedTouches[0].screenX;
    const swipeDistance = touchStartX - touchEndX;
    const minSwipeDistance = 50; // Minimum distance to trigger swipe
    
    if (Math.abs(swipeDistance) > minSwipeDistance) {
        if (swipeDistance > 0) {
            // Swipe left - next image
            changeImage(1);
        } else {
            // Swipe right - previous image
            changeImage(-1);
        }
    }
    
    isDragging = false;
}

// Mouse event handlers for drag functionality on desktop
function handleMouseDown(e) {
    touchStartX = e.clientX;
    isDragging = true;
    e.preventDefault(); // Prevent text selection
}

function handleMouseMove(e) {
    if (!isDragging) return;
    e.preventDefault();
}

function handleMouseUp(e) {
    if (!isDragging) return;
    
    touchEndX = e.clientX;
    const swipeDistance = touchStartX - touchEndX;
    const minSwipeDistance = 50;
    
    if (Math.abs(swipeDistance) > minSwipeDistance) {
        if (swipeDistance > 0) {
            changeImage(1);
        } else {
            changeImage(-1);
        }
    }
    
    isDragging = false;
}

// Close modal when clicking outside
document.getElementById('imageModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeModal();
    }
});

// Keyboard navigation
document.addEventListener('keydown', function(e) {
    const modal = document.getElementById('imageModal');
    if (modal.classList.contains('active')) {
        if (e.key === 'Escape') {
            closeModal();
        } else if (e.key === 'ArrowLeft') {
            changeImage(-1);
        } else if (e.key === 'ArrowRight') {
            changeImage(1);
        }
    }
});

// Add event listeners when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    const modalImage = document.getElementById('modalImage');
    
    // Touch events for mobile
    modalImage.addEventListener('touchstart', handleTouchStart, { passive: false });
    modalImage.addEventListener('touchmove', handleTouchMove, { passive: false });
    modalImage.addEventListener('touchend', handleTouchEnd, { passive: false });
    
    // Mouse events for desktop drag
    modalImage.addEventListener('mousedown', handleMouseDown);
    modalImage.addEventListener('mousemove', handleMouseMove);
    modalImage.addEventListener('mouseup', handleMouseUp);
    modalImage.addEventListener('mouseleave', function() {
        isDragging = false;
    });
});